<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customize Roll Tables</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .customize-container {
            max-width: 75%;
            margin: 0 auto;
            padding: 20px;
            background-color: rgba(0, 0, 0, 0.9);
            border-radius: 10px;
            color: #ffffff;
            font-family: 'Courier New', monospace;
        }
        label {
            display: block;
            margin-top: 15px;
            font-weight: bold;
        }
        textarea {
            width: 100%;
            height: 100px;
            margin-top: 5px;
            background-color: #333;
            color: #ffffff;
            border: 1px solid #555;
            padding: 10px;
            font-family: 'Courier New', monospace;
        }
        button {
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 1em;
            background-color: #d4af37;
            color: #000;
            border: none;
            cursor: pointer;
            border-radius: 5px;
        }
        button:hover {
            background-color: #c39b2e;
        }
    </style>
</head>
<body>
    <div class="customize-container">
        <h3>Customize Roll Tables</h3>
        <form id="rollTableForm">
            <!-- Form content will be generated by JavaScript -->
            <button type="button" onclick="saveCustomRollTables()">Save Changes</button>
        </form>
    </div>

    <script>
        let rollTables = {};

        // Load roll tables from localStorage or JSON file
        async function loadRollTables() {
            try {
                const cachedRollTables = localStorage.getItem('customRollTables');
                if (cachedRollTables) {
                    rollTables = JSON.parse(cachedRollTables);
                } else {
                    const response = await fetch('rollTables.json');
                    rollTables = await response.json();
                }
                displayRollTables(); // Call a function to populate the form
            } catch (error) {
                console.error("Error loading roll tables:", error);
            }
        }

        // Display the roll tables in a form
        function displayRollTables() {
            const form = document.getElementById('rollTableForm');
            for (const [die, values] of Object.entries(rollTables)) {
                const label = document.createElement('label');
                label.textContent = `Edit values for ${die}:`;
                const textarea = document.createElement('textarea');
                textarea.id = die;
                textarea.value = values.join('\n');
                form.insertBefore(label, form.lastElementChild);
                form.insertBefore(textarea, form.lastElementChild);
            }
        }

        // Save the updated roll tables to localStorage
        function saveCustomRollTables() {
            const form = document.getElementById('rollTableForm');
            for (let element of form.elements) {
                if (element.tagName === 'TEXTAREA') {
                    rollTables[element.id] = element.value.split('\n');
                }
            }
            localStorage.setItem('customRollTables', JSON.stringify(rollTables));
            alert('Roll tables saved successfully!');
        }

        window.onload = loadRollTables;
    </script>
</body>
</html>
